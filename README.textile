h1. SimpleRoles

SimpleRoles is a Rails Engine providing simple Role System for any Rails 3 app. It was created as demo role-system to accompany "CanTango gem":https://github.com/kristianmandrup/cantango initial installiation and usage. Intended to be very easy to setup & use.

It even seems to be good for being used as a real role system inspite of (or due to ;)) its almost maximum simplicity.

If you are looking to a real serious roles system solution try "Troles":https://github.com/kristianmandrup/troles gem created by "Kristian Mandrup":https://github.com/kristianmandrup

h2. Installiation

h3. Prerequisites

SimpleRoles only assumes you have User model

h3. Not a Gem yet

include in Gemfile:

<pre>
gem 'simple_roles', :git => "git://github.com/stanislaw/simple_roles.git"
bundle update
</pre>

h3. Copy SimpleRoles migrations by following rake task:

@rake simple_roles_engine:install:migrations@

And run

@rake db:migrate@

h3. Set up valid roles you're gonna have in your app

Create file simple_roles.rb in config/initializers and write there:

<pre>
# config/initializers/simple_roles.rb
SimpleRoles.configure do |config|
  config.valid_roles = [:user, :admin, :editor]
end
</pre>

h3. And finally include 'simple_roles' macros in your User model:

<pre>
class User
  simple_roles
end
</pre>

h2. Usage

<pre>
  admin_role = Role.find_by_name("admin")
  user = User.new(:name => "stanislaw")
  user.roles_list.should be_empty
  user.roles << :admin
  user.db_roles.should include(admin_role)
  user.roles.roles.should include(:admin)
  user.has_role?(:admin).should be_true
  user.has_roles?(:admin).should be_true
  user.save!
  user.db_roles.should include(admin_role)
  user.roles.should include(:admin)
  user = User.find_by_name "stanislaw"
  user.roles.should include(:admin)
  user.roles.remove(:admin)
  user.roles.should == []
  user.roles.roles.should == []
  user.save!
  user.roles.should == []
  user.roles = [:admin, :user]
  user.roles.should == [:admin, :user]
  user.has_role?(:admin, :user).should be_true
  user.has_roles?([:admin, :user]).should be_true
  user.roles.clear
  user.roles.should be_empty
  user.roles << :admin
  user.db_roles.should include(admin_role)
  user.roles.roles.should include(:admin)
  user.add_role :user
  user.roles.roles.should include(:user)
</pre>

h2. Todo:

* Write role groups part
* Provide some more config options
* More and better tests

